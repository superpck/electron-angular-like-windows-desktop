<div class="login-page">
  <div class="login-card" role="main">
    <!-- Logo & App Name -->
    <div class="login-header">
      <img [src]="appIcon" [alt]="appName + ' logo'" class="login-logo" />
      <h1 class="login-app-name">{{ appName }}</h1>
    </div>

    <h2 class="login-title">Sign In</h2>

    <!-- Error Message -->
    @if (errorMessage()) {
      <div class="login-error" role="alert" aria-live="polite">
        <mat-icon aria-hidden="true">error_outline</mat-icon>
        <span>{{ errorMessage() }}</span>
      </div>
    }

    <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <!-- Username -->
      <mat-form-field class="login-field" appearance="outline">
        <mat-label>Username</mat-label>
        <input
          matInput
          formControlName="username"
          autocomplete="username"
          aria-label="Username"
        />
        <mat-icon matPrefix aria-hidden="true">person</mat-icon>
        @if (form.controls.username.invalid && form.controls.username.touched) {
          <mat-error>Username is required</mat-error>
        }
      </mat-form-field>

      <!-- Password -->
      <mat-form-field class="login-field" appearance="outline">
        <mat-label>Password</mat-label>
        <input
          matInput
          formControlName="password"
          [type]="showPassword() ? 'text' : 'password'"
          autocomplete="current-password"
          aria-label="Password"
        />
        <mat-icon matPrefix aria-hidden="true">lock</mat-icon>
        <button
          matSuffix
          mat-icon-button
          type="button"
          (click)="togglePassword()"
          [attr.aria-label]="showPassword() ? 'Hide password' : 'Show password'"
        >
          <mat-icon>{{ showPassword() ? 'visibility_off' : 'visibility' }}</mat-icon>
        </button>
        @if (form.controls.password.invalid && form.controls.password.touched) {
          <mat-error>Password is required</mat-error>
        }
      </mat-form-field>

      <!-- Submit -->
      <button
        mat-flat-button
        color="primary"
        type="submit"
        class="login-btn"
        [disabled]="loading()"
      >
        @if (loading()) {
          Signing in...
        } @else {
          Sign In
        }
      </button>
    </form>

    <!-- Hint -->
    <p class="login-hint">
      Demo credentials: <code>admin / admin</code> &nbsp;|&nbsp; <code>user / user</code>
    </p>
  </div>
</div>
