<div class="edit-container">
  @if (selectedUser()) {
    <!-- Avatar & Name Header -->
    <div class="edit-header">
      <img
        [src]="selectedUser()!.picture.medium"
        [alt]="selectedUser()!.name.first"
        class="edit-avatar"
        width="72"
        height="72"
      />
      <div>
        <div class="edit-current-name">
          {{ selectedUser()!.name.first }} {{ selectedUser()!.name.last }}
        </div>
        <div class="edit-username">{{ selectedUser()!.login.username }}</div>
      </div>
    </div>

    <form [formGroup]="form" (ngSubmit)="save()" novalidate class="edit-form">
      <div class="edit-row">
        <mat-form-field appearance="outline" class="half">
          <mat-label>First name</mat-label>
          <input matInput formControlName="firstName" />
          @if (form.controls.firstName.invalid && form.controls.firstName.touched) {
            <mat-error>Required</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="half">
          <mat-label>Last name</mat-label>
          <input matInput formControlName="lastName" />
          @if (form.controls.lastName.invalid && form.controls.lastName.touched) {
            <mat-error>Required</mat-error>
          }
        </mat-form-field>
      </div>

      <mat-form-field appearance="outline" class="full">
        <mat-label>Email</mat-label>
        <mat-icon matPrefix aria-hidden="true">email</mat-icon>
        <input matInput formControlName="email" type="email" />
        @if (form.controls.email.invalid && form.controls.email.touched) {
          <mat-error>Valid email required</mat-error>
        }
      </mat-form-field>

      <div class="edit-row">
        <mat-form-field appearance="outline" class="half">
          <mat-label>Phone</mat-label>
          <mat-icon matPrefix aria-hidden="true">phone</mat-icon>
          <input matInput formControlName="phone" />
        </mat-form-field>

        <mat-form-field appearance="outline" class="half">
          <mat-label>Cell</mat-label>
          <mat-icon matPrefix aria-hidden="true">smartphone</mat-icon>
          <input matInput formControlName="cell" />
        </mat-form-field>
      </div>

      <!-- Read-only info -->
      <div class="edit-info-grid">
        <div class="edit-info-item">
          <span class="edit-info-label">Country</span>
          <span>{{ selectedUser()!.location.country }}</span>
        </div>
        <div class="edit-info-item">
          <span class="edit-info-label">Age</span>
          <span>{{ selectedUser()!.dob.age }}</span>
        </div>
        <div class="edit-info-item">
          <span class="edit-info-label">Gender</span>
          <span>{{ selectedUser()!.gender }}</span>
        </div>
        <div class="edit-info-item">
          <span class="edit-info-label">Nationality</span>
          <span>{{ selectedUser()!.nat }}</span>
        </div>
      </div>

      <div class="edit-actions">
        <button mat-flat-button color="primary" type="submit">
          <mat-icon aria-hidden="true">save</mat-icon>
          Save
        </button>
      </div>
    </form>
  } @else {
    <div class="edit-empty">No user selected</div>
  }
</div>
